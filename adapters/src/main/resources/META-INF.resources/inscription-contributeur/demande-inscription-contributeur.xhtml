<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                template="/WEB-INF/template.xhtml">

    <ui:define name="title">Contributeur - Demande inscription</ui:define>

    <ui:define name="viewname">
        <li>CONTRIBUTEUR</li>
        <li><i class="pi pi-chevron-right"/></li>
        <li>
            <p:link outcome="/inscription-contributeur/demande-inscription-contributeur">DEMANDE INSCRIPTION CONTRIBUTEUR</p:link>
        </li>
    </ui:define>

    <ui:define name="content">

        <div class="grid">
            <div class="col overflow-x-hidden">
                <div class="card ">
                    <h3 class="font-bold "> Initiation de l'inscription d'un contributeur </h3>
                    <div class="p-3">
                        <h:form id="formStep">
                            <p:steps activeIndex="#{inscriptionContributeurMB.activeIndex}">
                                <p:menuitem value="Informations"/>
                                <p:menuitem value="mini-places de marché"/>
                                <p:menuitem value="Récapitulatifs"/>
                            </p:steps>
                        </h:form>
                    </div>
                    <h:form id="formDetailContributeur">
                        <div style="#{inscriptionContributeurMB.activeIndex == 0 ? 'display: block' : 'display: none'}">

                            <div class="grid my-2">

                                <div class="col-12">
                                    <h6 class="my-3"><i class="pi pi-info-circle"/> Saisir les informations du contributeur</h6>
                                    <div class="ui-fluid formgrid grid">

                                        <div class="field col-12 md:col-6">
                                            <p:outputLabel for="@next" value="Pays de résidence"/>
                                            <p:selectOneMenu id="paysId" required="true" filter="true"
                                                             converter="#{entityConverter}"
                                                             requiredMessage="Ce champs est obligatoire"
                                                             value="#{inscriptionContributeurMB.contributeur.pays}"
                                                             filterMatchMode="startsWith" filterNormalize="true">
                                                <f:selectItem itemLabel="Sélectionner un pays" itemValue="#{null}"/>

                                                <f:selectItems value="#{inscriptionContributeurMB.lesPays}"
                                                               var="pays" itemValue="#{pays}"
                                                               itemLabel="#{pays.nom}"/>
                                            </p:selectOneMenu>
                                        </div>

                                        <div class="field col-12 md:col-6">
                                            <p:outputLabel for="@next" value="Type contributeur"/>
                                            <p:selectOneMenu id="typeId" filter="true" required="true"
                                                             value="#{inscriptionContributeurMB.contributeur.typeContributeur}"
                                                             filterMatchMode="startsWith" filterNormalize="true">
                                                <f:selectItem itemLabel="Sélectionner le type de contributeur" itemValue="#{null}"/>

                                                <f:selectItems
                                                        value="#{inscriptionContributeurMB.lestypesContributeurs}"
                                                        var="typeCont" itemValue="#{typeCont}"
                                                        itemLabel="#{typeCont}"/>
                                            </p:selectOneMenu>
                                        </div>

                                        <div class="field col-12 md:col-6">
                                            <p:outputLabel for="@next" value="Profil contibuteur"/>
                                            <p:selectOneMenu id="contribProf" filter="true" required="true"
                                                             value="#{inscriptionContributeurMB.contributeur.profilContributeur}"
                                                             filterMatchMode="startsWith" filterNormalize="true">
                                                <f:selectItem itemLabel="Sélectionner profil de contributeur" itemValue="#{null}"/>

                                                <f:selectItems value="#{inscriptionContributeurMB.lesProfils}"
                                                               var="profCont" itemValue="#{profCont}"
                                                               itemLabel="#{profCont}"/>
                                            </p:selectOneMenu>
                                        </div>

                                        <div class="field col-12 md:col-6">
                                            <p:outputLabel for="@next" value="Raison sociale"/>
                                            <p:inputText id="idRaisonSoc"
                                                         required="true"
                                                         requiredMessage="Ce champ est obligatoire"
                                                         placeholder="Saisir raison sociale"
                                                         value="#{inscriptionContributeurMB.contributeur.raisonSociale}"/>
                                        </div>

                                        <div class="field col-12 md:col-6">
                                            <p:outputLabel for="@next" value="Identifiant fiscal"/>
                                            <p:inputText id="contribFiscalId"
                                                         placeholder="Saisir l'identifiant fiscal"
                                                         value="#{inscriptionContributeurMB.contributeur.identifiantFiscal}"/>
                                        </div>

                                        <div class="field col-12 md:col-6">
                                            <p:outputLabel for="@next" value="Identifiant social"/>
                                            <p:inputText id="contribSocialId"
                                                         placeholder="Saisir l'identifiant social"
                                                         value="#{inscriptionContributeurMB.contributeur.identifiantSocial}"/>
                                        </div>

                                        <div class="field col-12 md:col-6">
                                            <p:outputLabel for="@next" value="Référence d'agrément"/>
                                            <p:inputText id="contribrefagree"
                                                         placeholder="Saisir la référence d'agrément"
                                                         value="#{inscriptionContributeurMB.contributeur.referenceAgrement}"/>
                                        </div>

                                        <div class="field col-12 md:col-6">
                                            <p:outputLabel for="@next" value="Contact téléphonique"/>
                                            <p:inputText id="contribPhone" maxlength="13" type="tel"
                                                         required="true"
                                                         requiredMessage="Ce champs est obligatoire"
                                                         value="#{inscriptionContributeurMB.contributeur.contactTelephonique}"
                                                         placeholder="Saisir le contact téléphonique "/>
                                        </div>

                                        <div class="field col-12 md:col-6">
                                            <p:outputLabel for="@next" value="Contact electronique"/>
                                            <p:inputText id="contribPhoneElectronique" type="email"
                                                         required="true"
                                                         requiredMessage="Ce champs est obligatoire"
                                                         value="#{inscriptionContributeurMB.contributeur.contactElectronique}"
                                                         placeholder="Saisir le contact electronique "/>
                                        </div>

                                        <div class="field col-12 md:col-6">
                                            <p:outputLabel for="@next" value="Adresse géographique"/>
                                            <p:inputText id="contribAdrGeo"
                                                         placeholder="Saisir l'adresse géographique"
                                                         value="#{inscriptionContributeurMB.contributeur.adresseGeographique}"/>
                                        </div>

                                        <div class="field col-12 md:col-6">
                                            <p:outputLabel for="@next" value="Adresse postale"/>
                                            <p:inputText id="contribAdrPost" maxlength="20"
                                                         placeholder="Saisir l'adresse postale"
                                                         value="#{inscriptionContributeurMB.contributeur.adressePostale}"/>
                                        </div>

                                        <div class="field col-12 md:col-6">
                                            <p:outputLabel for="@next" value="Eméteur agrément"/>
                                            <p:inputText id="emet"
                                                         placeholder="Saisir l'éméteur agrément"
                                                         value="#{inscriptionContributeurMB.contributeur.emetteurAgrement}"/>
                                        </div>

                                        <div class="field col-12 md:col-6">
                                            <p:outputLabel for="@next" value="Numéro de compte de reglément"/>
                                            <p:inputText id="contribRegCompte"
                                                         placeholder="Saisir le numéro de compte de reglément"
                                                         value="#{inscriptionContributeurMB.contributeur.referenceAgrement}"/>
                                        </div>

                                        <div class="field col-12 md:col-6">
                                            <p:outputLabel for="@next" value="Pays d'opérations"/>
                                            <p:selectCheckboxMenu id="paysOpId" required="true" filter="true"
                                                                  requiredMessage="Ce champs est obligatoire"
                                                                  converter="#{entityConverter}"
                                                                  showCheckbox="true" scrollHeight="200"
                                                                  label="Sélectionner les pays d'opérations"
                                                                  multiple="true"
                                                                  filterMatchMode="startsWith" filterNormalize="true"
                                                                  value="#{inscriptionContributeurMB.paysOperationARattacher}">
                                                <f:selectItems value="#{inscriptionContributeurMB.lesPays}"
                                                               var="pays"
                                                               itemLabel="#{pays.nom}" itemValue="#{pays}"/>
                                            </p:selectCheckboxMenu>
                                        </div>

                                        <div class="field col-12 md:col-12">
                                            <p:outputLabel for="@next" value="Description des activités "/>
                                            <p:inputTextarea rows="3" maxlength="255"
                                                             value="#{inscriptionContributeurMB.contributeur.descriptionActivites}"/>
                                        </div>

                                    </div>
                                    <h6 class="my-3 "><i class="pi pi-info-circle"/> Saisir les informations du dirigeant </h6>
                                    <div class="ui-fluid formgrid grid">
                                        <div class="field col-12 md:col-6">
                                            <p:outputLabel for="@next" value="Nom du dirigeant"/>
                                            <p:inputText id="dirigeantNom"
                                                         placeholder="Saisir le nom du dirigeant"
                                                         requiredMessage="Veuillez renseigner le nom du dirigeant"
                                                         required="true"
                                                         value="#{inscriptionContributeurMB.contributeur.nomDirigeant}"/>
                                        </div>

                                        <div class="field col-12 md:col-6">
                                            <p:outputLabel for="@next" value="Fonction du dirigeant"/>
                                            <p:inputText id="dirigeantFonction"
                                                         requiredMessage="Veuillez renseigner la fonction du dirigeant"
                                                         value="#{inscriptionContributeurMB.contributeur.fonctionDirigeant}"
                                                         placeholder="Saisir la fonction du dirigeant"/>

                                        </div>

                                        <div class="field col-12 md:col-6">
                                            <p:outputLabel for="@next" value="Courriel du dirigeant"/>
                                            <p:inputText id="dirigeantCourriel"
                                                         requiredMessage="Veuillez renseigner le courriel du dirigeant"
                                                         required="true"
                                                         value="#{inscriptionContributeurMB.contributeur.courrielDirigeant}"
                                                         placeholder="Saisir le courriel du dirigeant"/>
                                        </div>

                                        <div class="field col-12 md:col-6">
                                            <p:outputLabel for="@next" value="Contact du dirigeant"/>
                                            <p:inputText type="telephone" id="dirigeantPhone" maxlength="13"
                                                         requiredMessage="Ce champ est obligatoire"
                                                         required="true"
                                                         value="#{inscriptionContributeurMB.contributeur.mobileDirigeant}"
                                                         placeholder="Saisir le contact du dirigeant">
                                            </p:inputText>
                                        </div>
                                    </div>

                                    <div style="display: flex; justify-content: space-between; width: 100%;">
                                        <p:commandButton value="Annuler"
                                                         update="formStep, formDetailContributeur, formListPaysOperation, formListMmp, formPaysOp, formSoummissionDemande"
                                                         process="formDetailContributeur"
                                                         action="#{inscriptionContributeurMB.init()}" icon="pi pi-times"
                                                         styleClass="w-auto"/>

                                        <p:commandButton value="Suivant"
                                                         update="formStep, formDetailContributeur, formListPaysOperation, formListMmp, formPaysOp, formSoummissionDemande"
                                                         action="#{inscriptionContributeurMB.initierDemandeInscription()}"
                                                         process="formDetailContributeur"
                                                         styleClass="w-auto"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </h:form>

                    <div>
                        <div class="grid my-2">
                            <h:form id="formListPaysOperation">
                                <div class="col-12"
                                     style="#{inscriptionContributeurMB.activeIndex == 1 ? 'display: block' : 'display: none'}">

                                    <div class="flex-1 flex flex-column">
                                        <h5>Liste des pays d'opérations rattachés (#{inscriptionContributeurMB.lesPaysOperationRattaches.size()})</h5>
                                    </div>

                                    <p:dataTable id="paysTable" widgetVar="wPaysRattache"
                                                 var="paysOpRattache"
                                                 value="#{inscriptionContributeurMB.lesPaysOperationRattaches}"
                                                 selection="#{inscriptionContributeurMB.paysOpSelect}"
                                                 reflow="true" emptyMessage="Aucune donnée trouvée"
                                                 lazy="false" scrollable="true" scrollHeight="200px"
                                                 rowKey="#{paysOpRattache.ID}" style="height: 250px"
                                                 SelectMode="single">
                                        <p:ajax event="rowSelect" update="formListMmp"
                                                listener="#{inscriptionContributeurMB.collecterLesMmps()}"/>

                                        <p:column headerText="Nom">
                                            <h:outputText value="#{paysOpRattache.nom}"/>
                                        </p:column>

                                        <p:column headerText="CodeIso">
                                            <h:outputText value="#{paysOpRattache.codeIso}"/>
                                        </p:column>

                                        <p:column headerText="Indication international">
                                            <h:outputText value="#{paysOpRattache.indicatifInternational}"/>
                                        </p:column>
                                    </p:dataTable>
                                </div>
                            </h:form>
                        </div>
                        <h:form id="formListMmp">
                            <div class="grid my-2">

                                <div class="col-12 md:col-6"
                                     style="#{inscriptionContributeurMB.activeIndex == 1 ? 'display: block' : 'display: none'}">

                                    <div class="flex-1 flex flex-column">
                                        <h5>Liste des mini-places de marché non rattachées (#{inscriptionContributeurMB.lesMmpParPaysParContributeurNonRattachees.size()})</h5>
                                    </div>

                                    <p:dataTable id="mmpNonRattacheTable" widgetVar="wPaysNnRattache"
                                                 var="paysNonRattache" reflow="true"
                                                 value="#{inscriptionContributeurMB.lesMmpParPaysParContributeurNonRattachees}"
                                                 selection="#{inscriptionContributeurMB.lesMmpParPaysParContributeurARattacher}"
                                                 emptyMessage="Aucune donnée trouvée" lazy="false"
                                                 rowKey="#{paysNonRattache.id}" scrollable="true" scrollHeight="150px"
                                                 style="height: 200px" SelectMode="mutiple">

                                        <p:column selectionMode="multiple" style="width:16px;text-align:center"/>

                                        <p:column headerText="Libellé">
                                            <h:outputText value="#{paysNonRattache.libelle}"/>
                                        </p:column>

                                        <p:column headerText="Statut">
                                            <h:outputText value="#{paysNonRattache.statutMmp}"/>
                                        </p:column>
                                    </p:dataTable>
                                    <div class="p-col-12 p-lg-6 p-md-6">
                                        <p:commandButton style="width: 100px; margin-top: 3%"
                                                         update="formListMmp"
                                                         action="#{inscriptionContributeurMB.rattacherLesMmpsParPaysEtContributeur()}"
                                                         icon="pi pi-check" title="Cliquez ici pour Rattacher"
                                                         value="Rattacher"/>
                                    </div>

                                </div>

                                <div class="col-12 md:col-6"
                                     style="#{inscriptionContributeurMB.activeIndex == 1 ? 'display: block' : 'display: none'}">

                                    <div class="flex-1 flex flex-column">
                                        <h5>Liste des mini-places de marché rattachées (#{inscriptionContributeurMB.lesMmpParPaysParContributeurRattachees.size()})</h5>
                                    </div>

                                    <p:dataTable id="mmpRattacheTable" widgetVar="wPays"
                                                 var="mmpRattachee"
                                                 value="#{inscriptionContributeurMB.lesMmpParPaysParContributeurRattachees}"
                                                 selection="#{inscriptionContributeurMB.lesMmpParPaysParContributeurADetacher}"
                                                 reflow="true" emptyMessage="Aucune donnée trouvée" lazy="false"
                                                 rowKey="#{mmpRattachee.id}" scrollable="true" scrollHeight="150px"
                                                 style="height: 200px" SelectMode="multiple">

                                        <p:column selectionMode="multiple" style="width:16px;text-align:center"/>

                                        <p:column headerText="Libellé">
                                            <h:outputText value="#{mmpRattachee.libelle}"/>
                                        </p:column>

                                        <p:column headerText="Statut">
                                            <h:outputText value="#{mmpRattachee.statutMmp}"/>
                                        </p:column>
                                    </p:dataTable>
                                    <div class="p-col-12 p-lg-6 p-md-6">
                                        <p:commandButton style="width: 100px; margin-top: 3%"
                                                         update="formListMmp"
                                                         action="#{inscriptionContributeurMB.detacherLesMmpsParPaysEtContributeur()}"
                                                         icon="pi pi-times" title="Cliquez ici pour détacher"
                                                         value="Détacher"/>
                                    </div>
                                </div>

                            </div>
                        </h:form>
                        <h:form id="formPaysOp">
                            <div class="grid my-2"
                                 style="#{inscriptionContributeurMB.activeIndex == 1 ? 'display: block' : 'display: none'}">

                                <div class="mt-4"
                                     style="display: flex; justify-content: space-between; width: 100%;">

                                    <p:commandButton value="Précédent"
                                                     update="formStep, formDetailContributeur, formListPaysOperation, formListMmp, formPaysOp, formSoummissionDemande"
                                                     action="#{inscriptionContributeurMB.decrementerIndex()}"
                                                     process="@this" styleClass="w-auto"/>

                                    <p:commandButton value="Suivant"
                                                     update="formStep, formDetailContributeur, formListPaysOperation, formListMmp, formPaysOp, formSoummissionDemande"
                                                     action="#{inscriptionContributeurMB.incrementerIndex()}"
                                                     styleClass="w-auto"/>
                                </div>
                            </div>
                        </h:form>
                    </div>
                    <div>
                        <h:form id="formSoummissionDemande">
                            <div class="grid my-2"
                                 style="#{inscriptionContributeurMB.activeIndex == 2 ? 'display: block' : 'display: none'}">

                                <div class="col-12">
                                    <h6 class="my-3"><i class="pi pi-info-circle"/> Informations du contributeur</h6>
                                    <div class="ui-fluid formgrid grid">
                                        <div class="field col-12 md:col-4">
                                            <p:outputLabel for="@next" value="Pays de résidence"/>
                                            <p:inputText id="paysIdRecap" readonly="true"
                                                         value="#{inscriptionContributeurMB.contributeur.pays.nom}"/>
                                        </div>
                                        <div class="field col-12 md:col-4">
                                            <p:outputLabel for="@next" value="Type de contributeur"/>
                                            <p:inputText id="typeIdRecap" readonly="true"
                                                         value="#{inscriptionContributeurMB.contributeur.typeContributeur}"/>
                                        </div>
                                        <div class="field col-12 md:col-4">
                                            <p:outputLabel for="@next" value="Profil du contributeur"/>
                                            <p:inputText id="profilIdRecap" readonly="true"
                                                         value="#{inscriptionContributeurMB.contributeur.profilContributeur}"/>
                                        </div>
                                        <div class="field col-12 md:col-4">
                                            <p:outputLabel for="@next" value="Raison sociale"/>
                                            <p:inputText id="idRaisonSocRecap"
                                                         readonly="true"
                                                         value="#{inscriptionContributeurMB.contributeur.raisonSociale}"/>
                                        </div>

                                        <div class="field col-12 md:col-4">
                                            <p:outputLabel for="@next" value="Identifiant GIMPay"/>
                                            <p:inputText id="idGimPayRecap"
                                                         readonly="true"
                                                         value="#{inscriptionContributeurMB.contributeur.identifiantFiscal}"/>
                                        </div>

                                        <div class="field col-12 md:col-4">
                                            <p:outputLabel for="@next" value="Identifiant fiscal"/>
                                            <p:inputText id="contribFiscalIdRecap"
                                                         readonly="true"
                                                         value="#{inscriptionContributeurMB.contributeur.identifiantFiscal}"/>
                                        </div>
                                        <div class="field col-12 md:col-4">
                                            <p:outputLabel for="@next" value="Identifiant social"/>
                                            <p:inputText id="contribSocialIdReacp"
                                                         readonly="true"
                                                         value="#{inscriptionContributeurMB.contributeur.identifiantSocial}"/>
                                        </div>
                                        <div class="field col-12 md:col-4">
                                            <p:outputLabel for="@next" value="Référence d'agrément"/>
                                            <p:inputText id="contribrefagreeRecap"
                                                         readonly="true"
                                                         value="#{inscriptionContributeurMB.contributeur.referenceAgrement}"/>
                                        </div>
                                        <div class="field col-12 md:col-4">
                                            <p:outputLabel for="@next" value="Contact téléphonique"/>
                                            <p:inputText id="contribPhoneRecap"
                                                         value="#{inscriptionContributeurMB.contributeur.contactTelephonique}"
                                                         readonly="true"/>
                                        </div>
                                        <div class="field col-12 md:col-4">
                                            <p:outputLabel for="@next" value="Contact electronique"/>
                                            <p:inputText id="contribPhoneElectroniqueRecap"
                                                         value="#{inscriptionContributeurMB.contributeur.contactElectronique}"
                                                         readonly="true"/>
                                        </div>
                                        <div class="field col-12 md:col-4">
                                            <p:outputLabel for="@next" value="Adresse géographique"/>
                                            <p:inputText id="contribAdrGeoRecap"
                                                         readonly="true"
                                                         value="#{inscriptionContributeurMB.contributeur.adresseGeographique}"/>
                                        </div>
                                        <div class="field col-12 md:col-4">
                                            <p:outputLabel for="@next" value="Adresse postale"/>
                                            <p:inputText id="contribAdrPostRecap"
                                                         readonly="true"
                                                         value="#{inscriptionContributeurMB.contributeur.adressePostale}"/>
                                        </div>
                                        <div class="field col-12 md:col-4">
                                            <p:outputLabel for="@next" value="Eméteur agrément"/>
                                            <p:inputText id="emetRecap"
                                                         readonly="true"
                                                         value="#{inscriptionContributeurMB.contributeur.emetteurAgrement}"/>
                                        </div>
                                        <div class="field col-12 md:col-4">
                                            <p:outputLabel for="@next" value="Numéro de compte de reglément"/>
                                            <p:inputText id="contribRegCompteRecap"
                                                         readonly="true"
                                                         value="#{inscriptionContributeurMB.contributeur.referenceAgrement}"/>
                                        </div>
                                        <div class="field col-12 md:col-12">
                                            <p:outputLabel for="@next" value="Description des activités "/>
                                            <p:inputTextarea rows="3" maxlength="255" readonly="true"
                                                             value="#{inscriptionContributeurMB.contributeur.descriptionActivites}"/>
                                        </div>

                                    </div>
                                    <h6 class="my-3 "><i
                                            class="pi pi-info-circle"/> Informations du dirigeant </h6>
                                    <div class="ui-fluid formgrid grid">
                                        <div class="field col-12 md:col-6">
                                            <p:outputLabel for="@next" value="Nom du dirigeant"/>
                                            <p:inputText id="dirigeantNomRecap"
                                                         readonly="true"
                                                         value="#{inscriptionContributeurMB.contributeur.nomDirigeant}"/>
                                        </div>
                                        <div class="field col-12 md:col-6">
                                            <p:outputLabel for="@next" value="Fonction du dirigeant"/>
                                            <p:inputText id="dirigeantFonctionRecap"
                                                         value="#{inscriptionContributeurMB.contributeur.fonctionDirigeant}"
                                                         readonly="true"/>
                                        </div>
                                        <div class="field col-12 md:col-6">
                                            <p:outputLabel for="@next" value="Courriel du dirigeant"/>
                                            <p:inputText id="dirigeantCourrielRecap"
                                                         value="#{inscriptionContributeurMB.contributeur.courrielDirigeant}"
                                                         readonly="true"/>
                                        </div>
                                        <div class="field col-12 md:col-6">
                                            <p:outputLabel for="@next" value="Mobile du dirigeant "/>
                                            <p:inputText type="telephone" id="dirigeantPhoneRecap" maxlength="13"
                                                         value="#{inscriptionContributeurMB.contributeur.mobileDirigeant}"
                                                         readonly="true">
                                            </p:inputText>
                                        </div>
                                    </div>
                                </div>
                                <div class="grid my-2">
                                    <div class="col-12 md:col-6"
                                         style="#{inscriptionContributeurMB.activeIndex == 2 ? 'display: block' : 'display: none'}">

                                        <div class="flex-1 flex flex-column">
                                            <h5>Liste des pays d'opérations rattachés (#{inscriptionContributeurMB.lesPaysOperationRattaches.size()})</h5>
                                        </div>
                                        <p:dataTable id="paysResumeTable" widgetVar="wPaysResumeRattache"
                                                     var="paysOpRattacheResume"
                                                     value="#{inscriptionContributeurMB.lesPaysOperationRattaches}"
                                                     selection="#{inscriptionContributeurMB.paysOpSelect}"
                                                     reflow="true"
                                                     emptyMessage="Aucune donnée trouvée"
                                                     lazy="false"
                                                     rowKey="#{paysOpRattacheResume.ID}" scrollable="true"
                                                     scrollHeight="200px"
                                                     style="height: 250px"
                                                     SelectMode="single">
                                            <p:ajax event="rowSelect"
                                                    update="formSoummissionDemande:mmpRattacheTableResume"
                                                    listener="#{inscriptionContributeurMB.collecterLesMmps()}"/>
                                            <p:column headerText="Nom">
                                                <h:outputText value="#{paysOpRattacheResume.nom}"/>
                                            </p:column>
                                            <p:column headerText="CodeIso">
                                                <h:outputText value="#{paysOpRattacheResume.codeIso}"/>
                                            </p:column>
                                            <p:column headerText="Indication international">
                                                <h:outputText value="#{paysOpRattacheResume.indicatifInternational}"/>
                                            </p:column>
                                        </p:dataTable>
                                    </div>

                                    <div class="col-12 md:col-6"
                                         style="#{inscriptionContributeurMB.activeIndex == 2 ? 'display: block' : 'display: none'}">


                                        <div class="flex-1 flex flex-column">
                                            <h5>Liste des mini-places de marché rattachées (#{inscriptionContributeurMB.lesMmpParPaysParContributeurRattachees.size()})</h5>
                                        </div>
                                        <p:dataTable id="mmpRattacheTableResume" widgetVar="wPaysResume"
                                                     var="mmpRattacheeResume"
                                                     value="#{inscriptionContributeurMB.lesMmpParPaysParContributeurRattachees}"
                                                     reflow="true"
                                                     emptyMessage="Aucune donnée trouvée"
                                                     lazy="false"
                                                     rowKey="#{mmpRattachee.id}" scrollable="true" scrollHeight="150px"
                                                     style="height: 200px"
                                                     SelectMode="single">
                                            <p:column headerText="Libellé">
                                                <h:outputText value="#{mmpRattacheeResume.libelle}"/>
                                            </p:column>
                                            <p:column headerText="Statut">
                                                <h:outputText value="#{mmpRattacheeResume.statutMmp}"/>
                                            </p:column>
                                        </p:dataTable>
                                    </div>

                                </div>
                            </div>

                            <div class="grid my-2"
                                 style="#{inscriptionContributeurMB.activeIndex == 2 ? 'display: block' : 'display: none'}">
                                <div class="mt-4"
                                     style="display: flex; justify-content: space-between; width: 100%;">

                                    <p:commandButton value="Précédent"
                                                     update="formStep, formDetailContributeur, formListPaysOperation, formListMmp, formPaysOp, formSoummissionDemande"
                                                     action="#{inscriptionContributeurMB.decrementerIndex()}"
                                                     process="@this" styleClass="w-auto"
                                    />
                                    <p:commandButton value="Soumettre"
                                                     update="formStep, formDetailContributeur, formListPaysOperation, formListMmp, formPaysOp, formSoummissionDemande"
                                                     action="#{inscriptionContributeurMB.finaliserDemandeInscription()}"
                                                     process="formSoummissionDemande"
                                                     styleClass="w-auto"
                                    />
                                </div>
                            </div>
                        </h:form>
                    </div>

                </div>
            </div>
        </div>


    </ui:define>
</ui:composition>


